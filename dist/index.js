(()=>{"use strict";const e="https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/Zr5lIh9krvF0gpgxjQfv/scores",t=async()=>await fetch(e);let c=1;const n=async e=>{const t=document.querySelector(".table-body"),n=document.querySelector(".pagination"),r=a(c,5,e);t.innerHTML="",r.forEach((e=>{const c=document.createElement("tr");c.className="tr-row",c.innerHTML=`<td class="d-flex align-items-center"> <span class="user-icon"><i class="fa fa-user-circle"></i></span>${e.user} : ${e.score}</td>`,t.appendChild(c)}));const i=Math.ceil(e.length/5);s(i,n)},s=(e,s)=>{s.innerHTML="";for(let a=1;a<=e;a+=1){const e=document.createElement("li");e.className="p-item rounded-circle text-center d-flex justify-content-center",e.id=a,c==e.id&&(e.classList.add("bg-primary"),e.classList.add("p-active")),e.addEventListener("click",(async()=>{c=e.id;const s=await t(),{result:a}=await s.json();n(a)})),e.innerHTML=`${a}`,s.appendChild(e)}},a=(e=1,t,c)=>{const n=t*(e-=1);return c.slice(n,n+t)},r=document.querySelector("form"),i=document.querySelector(".inputName"),o=document.querySelector(".inputScore");document.querySelector(".refrech").addEventListener("click",(async()=>{const e=await t(),{result:c}=await e.json();n(c),document.querySelector(".success").innerHTML=""})),r.addEventListener("submit",(async t=>{try{t.preventDefault();const c={user:i.value,score:o.value},n=await(async t=>(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json())(c),{result:s}=await n,a=document.querySelector(".success");a.innerHTML=s?'<i class="fa fa-check-circle-o"></i>  \n      Sent successfuly':'<span class="text-danger"> <i class="fa fa-times-circle"></i> \n        Error incorrect user</span>',setTimeout((()=>{a.innerHTML=""}),2e3),o.value="",i.value=""}catch(e){const t=document.querySelector(".success");t.innerHTML=`<span class="text-danger"> <i class="fa fa-times-circle"></i> \n        ${e}</span>`,setTimeout((()=>{t.innerHTML=""}),3e3)}})),window.onload=async()=>{const e=await t(),{result:c}=await e.json();n(c)}})();